"use strict";function filepickerDirective(e,r,i){return{restrict:"A",scope:{onSuccess:"&"},link:function(i,n,t){var c,l;n.bind("change",function(r){r.preventDefault(),i.onSuccess({event:r.originalEvent||r}),e.$apply()}),n=n.length?n[0]:n;for(c in t.$attr)l=t.$attr[c],n.setAttribute(l,t[c]);r.constructWidget(n)}}}function filepickerService(e){return e.filepicker}function filepickerPreviewDirective(e,r){return{restrict:"A",scope:{url:"="},link:function(e,r,i){function n(e){e&&(e=e.replace("api/file/","api/preview/"),c.src=e)}var t=e.url,c=document.createElement("iframe");c.src=t,c.width="100%",c.height="100%",angular.element(r).append(c),e.$watch("url",n)}}}function fpUtilService(){function e(e){var i=[];for(var n in e)e.hasOwnProperty(n)&&("[object Object]"!==Object.prototype.toString.call(e[n])?i.push(n+"="+e[n]):i.push(r(e[n])));return i.join("&")}function r(e){var r=[];for(var i in e)e.hasOwnProperty(i)&&r.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return r.join("&")}return{toParams:e,serialize:r}}function fpConvert(e,r){return function(i,n){var t=e("fpUrlFilter")(i);if(t&&n)return t+"/convert?"+r.toParams(n)}}angular.module("angular-filepicker",[]),window.filepicker=window.filepicker||{},window.filepicker.plugin="angular_js_lib",angular.module("angular-filepicker").directive("filepicker",filepickerDirective),filepickerDirective.$inject=["$rootScope","filepickerService","$parse"],angular.module("angular-filepicker").provider("filepicker",function(){this.$get=function(){return window.filepicker},this.setKey=function(e){try{window.filepicker.setKey(e)}catch(r){console.error("Include filepicker.js script")}}}),angular.module("angular-filepicker").service("filepickerService",filepickerService),filepickerService.$inject=["$window"],angular.module("angular-filepicker").directive("filepickerPreview",filepickerPreviewDirective),filepickerPreviewDirective.$inject=["$rootScope","filepickerService"],angular.module("angular-filepicker").service("fpUtilService",fpUtilService),angular.module("angular-filepicker").filter("fpConvert",fpConvert),fpConvert.$inject=["$filter","fpUtilService"],angular.module("angular-filepicker").filter("fpUrlFilter",function(){return function(e){if(!e)return"";var r=["/convert","/metadata","?"];for(var i in r){var n=e.indexOf(r[i]);if(n>-1)return e.substr(0,n)}return e}});